async function carregarVestibulares() {
  try {
    const resposta = await fetch('https://vestibulares-302d.restdb.io/rest/vestibular', {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'x-apikey': '6855efa8bb5ccc0c9cf6d9ad',
        'cache-control': 'no-cache'
      }
    });

    const vestibulares = await resposta.json();

    const tabelaDiv = document.getElementById('tabela-vestibulares');

    if (vestibulares.length === 0) {
      tabelaDiv.innerHTML = "<p style='text-align:center'>Nenhum vestibular cadastrado ainda.</p>";
      return;
    }

    let html = `<table style="width:100%; border-collapse:collapse; margin-top: 20px;">
      <thead>
        <tr style="background:#ecf0f1;">
          <th style="padding:10px; text-align:left; border:1px solid #ccc;">Nome</th>
          <th style="padding:10px; text-align:left; border:1px solid #ccc;">Início</th>
          <th style="padding:10px; text-align:left; border:1px solid #ccc;">Término</th>
          <th style="padding:10px; text-align:center; border:1px solid #ccc;">Ações</th>
        </tr>
      </thead><tbody>`;

    vestibulares.forEach(v => {
      html += `
        <tr>
          <td style="padding:10px; border:1px solid #ccc;">${v.nome}</td>
          <td style="padding:10px; border:1px solid #ccc;">${v.data_inicio}</td>
          <td style="padding:10px; border:1px solid #ccc;">${v.data_fim}</td>
          <td style="padding:10px; text-align:center; border:1px solid #ccc;">
            <a href="gerenciarvest.html?id=${v._id}">
              <button style="padding:6px 12px; background:#27ae60; color:white; border:none; border-radius:4px; cursor:pointer;">
                Gerenciar
              </button>
            </a>
          </td>
        </tr>`;
    });

    html += `</tbody></table>`;
    tabelaDiv.innerHTML = html;

  } catch (erro) {
    console.error('Erro ao buscar vestibulares:', erro);
    document.getElementById('tabela-vestibulares').innerHTML = "<p style='color:red'>Erro ao carregar vestibulares.</p>";
  }
}

// Chamar assim que carregar a página
window.addEventListener('DOMContentLoaded', carregarVestibulares);
